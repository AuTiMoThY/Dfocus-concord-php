<{extends file="../layout.tpl.htm"}>
<{block name="head-last"}>
	<link rel="stylesheet" href="/admin/css/edit.css" type="text/css" />
	<script src="/admin/js/edit.js"></script>
	<script src="<{$smarty.server.JASONWANG826_CONFIG.CKEDITOR_ALIAS}>/full/ckeditor.js"></script>
	<script src="<{$smarty.server.JASONWANG826_CONFIG.CKEDITOR_ALIAS}>/full/adapters/jquery.js"></script>
<{/block}>
<{block name="content"}>
  <div class="row">
		<div class="col-lg-12">
			<h3 class="page-header"><{$page_title}></h3>
		</div>
	</div>
	
	<script type="text/javascript">
	<!--
		function onValidationComplete(f,v)	{
			var $sdate=$('input[name="sdate"]');
			if($sdate.val()=='')	{
				$sdate.validationEngine('showPrompt','* 此欄位不可空白','error', undefined, true);
				v=false;
			}
			var $edate=$('input[name="edate"]');
			if($edate.val()=='')	{
				$edate.validationEngine('showPrompt','* 此欄位不可空白','error', undefined, true);
				v=false;
			}
			var $editor=$('textarea[name="content"');
			if($editor.val()=='')	{
				$('#content').validationEngine('showPrompt','* 此欄位不可空白','error', undefined, true);
				v=false;
			}
			return v;
		}
	//-->
	</script>
	<form class="edit" method="post" action="./" enctype="multipart/form-data" onValidationComplete="onValidationComplete">
		<input type="hidden" name="action" value="<{if $smarty.request.action=='new'}>insert<{else}>update<{/if}>" />
		<input type="hidden" name="id" value="<{$r.id|escape}>" />
		<div class="row list">
			<div class="col-lg-12">
				<div class="panel panel-default">
					<div class="panel-heading">
						<{if $smarty.request.action=='new'}>新增<{elseif $smarty.request.action=='edit'}>編輯<{/if}><{$page_title}>
						<div class="pull-right"><a href="./">列表</a></div>
					</div>
					<div class="panel-body">

						<div class="form-group">
							<label>活動期間</label>
							<div>
								<input type="text" name="sdate" value="<{$r.sdate}>" placeholder="開始日期" class="form-control inline-block date">
								~
								<input type="text" name="edate" value="<{$r.edate}>" placeholder="結束日期" class="form-control inline-block date">
							</div>
						</div>

						<div class="form-group">
							<label>標題</label>
							<input type="text" name="title" value="<{$r.title}>" class="form-control validate[required]">
						</div>

						<div class="form-group">
							<label>圖片上傳</label>
							<input type="file" name="icon" class="validate[<{if $smarty.request.action=='new'}>required,<{/if}>custom[image-file]] image-upload" preview-at="icon">
							尺寸 : 390 px * 260 px
							<div src="<{$r.icon|escape}>" id="icon" class="image-preview image-preview-crop" width="390" height="260"></div>
						</div>

						活動資訊
						<div class="form-group">
							<label>講師</label>
							<input type="text" name="lecturer" value="<{$r.lecturer}>" class="form-control validate[required]">
						</div>

						<div class="form-group">
							<label>嘉賓</label>
							<input type="text" name="guest" value="<{$r.guest}>" class="form-control">
						</div>

						<div class="form-group">
							<label>日期</label>
							<input type="text" name="date" value="<{$r.date}>" class="form-control validate[required]">
						</div>

						<div class="form-group">
							<label>時間</label>
							<input type="text" name="time" value="<{$r.time}>" class="form-control validate[required]">
						</div>

						<div class="form-group">
							<label>地點</label>
							<input type="text" name="location" value="<{$r.location}>" class="form-control validate[]">
						</div>

						<div class="form-group">
							<label>費用</label>
							<input type="text" name="price" value="<{$r.price}>" class="form-control validate[custom[integer]]">
							<div class="notice">空白表示免費</div>
						</div>

						<div class="form-group">
							<div><label>內容</label></div>
							<div id="content"></div>
							<textarea name="content" rows="12" cols="80" class="html-editor"><{$r.content|escape}></textarea>
						</div>

						<div class="form-group">
							<label>排序</label>
							<div class="ord" name="ord" maxOrd="<{$maxOrd}>" value="<{$r.ord|escape}>"></div>
						</div>

						<div class="form-group">
							<label>是否顯示</label>
							<label class="radio-inline"><input type="radio" name="enable" value="Y"<{if $r.enable=='Y'}> checked<{/if}>>是</label>
							<label class="radio-inline"><input type="radio" name="enable" value="N"<{if $r.enable=='N'}> checked<{/if}>>否</label>
						</div>
			
						<button type="submit" class="btn btn-success">確認修改</button>

					</div>

				</div>
			</div>
		</div>
	</form>
<{/block}>
